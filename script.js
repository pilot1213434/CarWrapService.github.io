const apiKey = 'b82f0b66a1cbcedcfba57f7ad9d45096';

const city = 'Salt lake city'; // Замените на ваш город

const getWeatherForecast = async (city) => {
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`;
    try {
        const response = await fetch(url);
        const data = await response.json();
        const temperature = Math.round(data.main.temp - 273.15); // Преобразование температуры в градусы Цельсия
        return `Температура в городе ${city}: ${temperature}°C`;
    } catch (error) {
        console.error('Ошибка при получении данных о погоде:', error);
        return 'Извините, не удалось получить прогноз погоды. Попробуйте позже.';
    }
};

const assistant = async (question) => {
    // Приветствие и обычные ответы
    const greetings = ['привет', 'здравствуйте', 'приветствую вас'];
    
       const responses = {
    'привет': 'Привет! Чем могу помочь?',
    'здравствуй': 'Здравствуйте! Чем я могу быть полезен?',
    'как дела?': 'У меня все отлично! А у вас?',
    'чем занимаешься?': 'Я здесь, чтобы помочь вам. Что вас интересует?',
    'что делаешь?': 'Отвечаю на вопросы. Есть что-то, что вы хотели бы узнать?',
    'какая сегодня погода?': 'Давайте узнаем. В каком городе вы находитесь?',
    'спасибо': 'Пожалуйста! Если у вас возникнут еще вопросы, обращайтесь.',
    'что ты умеешь?': 'Я могу отвечать на вопросы, давать советы, предоставлять информацию и многое другое. Просто спросите!',
    'сколько времени?': 'Сейчас времени нет.',
    'кто ты?': 'Я ваш персональный ассистент, готовый помочь вам в любое время.',
    'какая погода?': 'Давайте узнаем. В каком городе вы интересуетесь погодой?',
    'спасибо, пока': 'Пожалуйста! Если у вас будет еще что-то, просто спросите. До свидания!',
    'в чем смысл жизни?': 'Смысл жизни - это вопрос, который каждый человек задает себе по-своему.',
    'какой смысл жизни?': 'Смысл жизни - это вопрос, который может иметь множество ответов и зависит от ваших убеждений и ценностей.',
    'ты любишь меня?': 'Как ассистент, я предан своим обязанностям, чтобы помогать вам в ваших запросах.',
    'ты настоящий?': 'Я виртуальный ассистент, созданный для помощи и удобства ваших запросов.',
    'какой смысл жизни?': 'Этот вопрос не имеет однозначного ответа и может иметь разные значения для разных людей.',
    'как сделать мир лучше?': 'Мир может стать лучше, если каждый из нас будет проявлять доброту, сострадание и заботу о других. Мы можем внести свой вклад, помогая нуждающимся, поддерживая окружающую среду и стремясь к миру и справедливости.',
    'что такое счастье?': 'Счастье - это состояние удовлетворения, радости и благополучия. Оно может проявляться в различных формах, включая удовлетворение от достижений, радость от близких отношений и гармонию с самим собой и окружающим миром.',
    'что такое любовь?': 'Любовь - это глубокое чувство привязанности, уважения и преданности к другому человеку. Она проявляется в заботе, поддержке и желании сделать другого человека счастливым.'
};
    
    for (const greeting of greetings) {
        if (question.toLowerCase().includes(greeting)) {
            return 'Здравствуйте! Чем могу помочь вам?';
        }
    }

    for (const questionPattern in responses) {
        const regex = new RegExp(questionPattern, 'i');
        if (regex.test(question)) {
            if (questionPattern === 'какая погода?') {
                const city = 'Salt lake city'; // Замените на ваш город
                return await getWeatherForecast(city);
            }
            return responses[questionPattern];
        }
    }
    
    return 'Извините, я не понимаю ваш вопрос. Могу ли я помочь вам чем-то еще?';
};

document.getElementById("button").addEventListener("click", async function() {
    const question = document.getElementById("from").value.trim();
    const answer = await assistant(question);
    document.getElementById("to").innerHTML = answer;
});
